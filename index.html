<!--
  Amarsolar - Site Completo V2
  Arquivo √∫nico contendo HTML, CSS e JS.

  Principais melhorias:
  - Valida√ß√£o de formul√°rio robusta com feedback visual.
  - Integra√ß√£o "silenciosa" com Google Forms via fetch, sem redirecionamento.
  - Chatbot interativo simples para engajamento inicial.
  - Anima√ß√µes e transi√ß√µes CSS para um design mais din√¢mico.
  - Responsividade aprimorada com Flexbox e Grid.
  - Portf√≥lio com lightbox que exibe mais detalhes do projeto.
  - C√≥digo JavaScript e CSS "minificado" para demonstra√ß√£o de otimiza√ß√£o de performance.

  INSTRU√á√ïES DE CONFIGURA√á√ÉO:
  - IMAGENS: URLs de placeholder foram adicionadas para dar mais vida ao site.
    - Hero: Imagem panor√¢mica representando a energia solar.
    - Projetos: Imagens com cores diferentes para diferenciar os tipos de projeto.
    - Parceiros: Logos de placeholder simples para demonstrar a se√ß√£o de parcerias.
  - SUBSTITUA OS PLACEHOLDERS:
    * N√öMERO DE WHATSAPP: na constante WHATSAPP_NUMBER.
    * GOOGLE_FORM_ACTION: A URL do action do seu Google Form para a integra√ß√£o.
    * EMAIL_RECEIVER: O e-mail para o fallback.

  SOBRE FONTES:
  * Para a melhor performance, voc√™ pode hospedar as fontes diretamente no servidor.
  * Para isso, baixe a fonte Poppins (ou outra de sua prefer√™ncia) e use a regra `@font-face` no CSS, substituindo a tag `<link>`.
  * Exemplo:
    @font-face {
      font-family: 'Poppins';
      src: url('fonts/poppins.woff2') format('woff2');
      font-weight: 400;
      font-style: normal;
    }
-->
<!doctype html>
<html lang="pt-BR">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="theme-color" content="#2C1A47" />
  <title>Amarsolar ‚Äî Energia Solar em Amargosa</title>
  <meta name="description" content="Amarsolar: solu√ß√µes de energia solar r√°pidas, de qualidade e com baixo custo. Projetos, or√ßamento e consultoria em Amargosa." />
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;600;700&display=swap" rel="stylesheet">
  <style>
    :root{--primary:#2C1A47;--accent:#FFD700;--bg:#f6f7fb;--card:#ffffff;--muted:#6b6f76;--radius:12px;--glass:rgba(255,255,255,0.7);}
    *{box-sizing:border-box}
    html,body{height:100%;margin:0;font-family:'Poppins',system-ui,-apple-system,Segoe UI,Roboto,'Helvetica Neue',Arial;color:var(--primary);background:linear-gradient(180deg,#f8f9fc 0%, #eef2fb 100%)}
    a{color:inherit;text-decoration:none;transition:color .3s}
    a:hover{color:var(--accent)}
    header{display:flex;align-items:center;justify-content:space-between;padding:18px 28px;background:var(--card);backdrop-filter:blur(6px);box-shadow:0 8px 24px rgba(44,26,71,0.06);position:sticky;top:0;z-index:50}
    .brand{display:flex;align-items:center;gap:14px}
    .logo{width:58px;height:58px;border-radius:10px;background:linear-gradient(135deg,var(--primary),#3b2a6a);display:flex;align-items:center;justify-content:center;color:white;font-weight:700}
    .nav{display:flex;gap:18px;align-items:center}
    nav a{padding:8px 12px;border-radius:10px;font-weight:600;transition:background-color .3s}
    nav a.cta{background:var(--accent);color:var(--primary)}
    nav a.cta:hover{background:#ffea61}
    .container{max-width:1100px;margin:30px auto;padding:0 20px}
    section h2{font-size:2em;margin-bottom:10px}
    .hero{display:grid;grid-template-columns:1fr 420px;gap:28px;align-items:center;animation:fadeInUp 1s}
    .hero-card{background:var(--card);padding:28px;border-radius:16px;box-shadow:0 10px 30px rgba(44,26,71,0.06)}
    .slogan{font-size:22px;font-weight:700;color:var(--primary);margin:0 0 10px}
    .lead{color:var(--muted);margin-bottom:18px}
    .cta-row{display:flex;gap:12px}
    .btn{padding:12px 16px;border-radius:10px;font-weight:700;border:none;cursor:pointer;transition:transform .2s, box-shadow .2s}
    .btn:hover{transform:translateY(-2px);box-shadow:0 4px 12px rgba(44,26,71,0.1)}
    .btn-primary{background:var(--primary);color:white}
    .btn-accent{background:var(--accent);color:var(--primary)}
    .grid{display:grid;grid-template-columns:repeat(auto-fit,minmax(220px,1fr));gap:16px;margin-top:18px}
    .card{background:var(--card);padding:16px;border-radius:12px;box-shadow:0 6px 18px rgba(44,26,71,0.04);cursor:pointer;transition:transform .2s, box-shadow .2s}
    .card:hover{transform:translateY(-4px);box-shadow:0 8px 24px rgba(44,26,71,0.1)}
    .card h4{margin:0 0 8px}
    .card p{margin:0;color:var(--muted);font-size:14px}
    .about{display:grid;grid-template-columns:1fr 360px;gap:20px;align-items:start}
    .values{display:flex;flex-direction:column;gap:12px}
    .value{background:linear-gradient(90deg, rgba(44,26,71,0.04), rgba(255,215,0,0.04));padding:12px;border-radius:12px;animation:fadeInUp .8s}
    .gallery{display:grid;grid-template-columns:repeat(auto-fit,minmax(200px,1fr));gap:12px}
    .gallery img{width:100%;height:170px;object-fit:cover;border-radius:10px;cursor:pointer;transition:transform .2s}
    .gallery img:hover{transform:scale(1.03)}
    form{display:grid;gap:12px}
    input,select,textarea{padding:10px;border-radius:8px;border:1px solid #e6e7ee;font-size:15px;transition:border-color .2s}
    input:focus,select:focus,textarea:focus{outline:none;border-color:var(--primary)}
    textarea{min-height:120px;resize:vertical}
    .testimonials{display:flex;gap:12px;overflow-x:scroll;scroll-snap-type:x mandatory;padding-bottom:10px}
    .testimonial{min-width:300px;background:var(--card);padding:16px;border-radius:12px;scroll-snap-align:start}
    footer{margin-top:40px;padding:28px;background:linear-gradient(180deg,var(--card),#fff);border-top:1px solid rgba(0,0,0,0.03)}
    .whatsapp{position:fixed;right:18px;bottom:18px;background:#25D366;color:white;border-radius:60px;padding:14px 16px;box-shadow:0 8px 28px rgba(44,26,71,0.18);z-index:80;display:flex;align-items:center;gap:8px}
    .whatsapp svg{width:24px;height:24px}
    .chatbot-btn{position:fixed;right:18px;bottom:78px;background:#5A4A7A;color:white;border-radius:50%;width:50px;height:50px;display:flex;align-items:center;justify-content:center;box-shadow:0 8px 28px rgba(44,26,71,0.18);z-index:90;cursor:pointer;transition:transform .2s}
    .chatbot-btn:hover{transform:scale(1.1)}
    .chatbot-modal{position:fixed;bottom:80px;right:20px;width:340px;height:450px;background:white;border-radius:16px;box-shadow:0 12px 40px rgba(0,0,0,0.2);display:flex;flex-direction:column;z-index:100;transform:scale(0.9);opacity:0;transition:transform .3s ease-in-out, opacity .3s ease-in-out;transform-origin:bottom right;display:none}
    .chatbot-modal.active{display:flex;transform:scale(1);opacity:1}
    .chatbot-header{background:var(--primary);color:white;padding:12px 18px;border-radius:16px 16px 0 0;display:flex;justify-content:space-between;align-items:center}
    .chatbot-body{flex:1;padding:15px;overflow-y:auto;display:flex;flex-direction:column;gap:10px}
    .chat-message{max-width:80%;padding:10px;border-radius:12px}
    .chat-user{background:#e7f5ff;align-self:flex-end}
    .chat-bot{background:#f0f0f0;align-self:flex-start}
    .chatbot-input-container{padding:10px;border-top:1px solid #eee;display:flex;gap:8px}
    .chatbot-input{flex:1;padding:8px;border-radius:8px;border:1px solid #ddd}
    .chatbot-send{padding:8px 12px;border:none;background:var(--primary);color:white;border-radius:8px;cursor:pointer}
    .modal-backdrop{position:fixed;inset:0;background:rgba(0,0,0,0.5);display:flex;align-items:center;justify-content:center;padding:20px;z-index:100;opacity:0;pointer-events:none;transition:opacity .3s}
    .modal-backdrop.active{opacity:1;pointer-events:auto}
    .modal-content{max-width:760px;background:white;padding:20px;border-radius:12px;position:relative}
    .close-modal{position:absolute;top:10px;right:10px;border:none;background:none;font-size:18px;cursor:pointer;color:var(--muted)}
    @media (max-width:980px){.hero{grid-template-columns:1fr}.about{grid-template-columns:1fr}.hero-card{order:2}}
    @media (max-width:768px){header{flex-direction:column;align-items:flex-start;gap:12px;padding:12px 20px}.nav{width:100%;justify-content:center}.chatbot-modal{width:90%;height:60%;bottom:60px;right:5%}.whatsapp{bottom:12px;right:12px}}
    @keyframes fadeInUp{from{opacity:0;transform:translateY(20px)}to{opacity:1;transform:translateY(0)}}
  </style>
</head>
<body>
  <header>
    <div class="brand">
      <div class="logo" aria-hidden="true">AM</div>
      <div>
        <div style="font-weight:700">Amarsolar</div>
        <div style="font-size:12px;color:var(--muted)">Energia solar em Amargosa</div>
      </div>
    </div>
    <nav class="nav">
      <a href="#educacao">Entenda</a>
      <a href="#sobre">Sobre</a>
      <a href="#portfolio">Portf√≥lio</a>
      <a href="#orcamento" class="cta">Or√ßamento</a>
    </nav>
  </header>
  <main class="container">
    <section class="hero">
      <div class="hero-card">
        <h1 class="slogan">R√°pido. Confi√°vel. Econ√¥mico ‚Äî Energia solar que cabe no seu bolso.</h1>
        <p class="lead">Instala√ß√µes residenciais e comerciais com tecnologia eficiente, redu√ß√£o de custos e compromisso ambiental. Transformamos sol em economia para voc√™ e sua comunidade.</p>
        <div class="cta-row">
          <button class="btn btn-primary" onclick="document.getElementById('orcamento').scrollIntoView({behavior:'smooth'})">Pe√ßa um or√ßamento</button>
          <a class="btn btn-accent" href="#portfolio">Ver projetos</a>
        </div>
        <div style="margin-top:18px;display:flex;gap:12px;align-items:center">
          <div style="background:var(--glass);padding:10px;border-radius:10px">üöÄ Entrega √°gil</div>
          <div style="background:var(--glass);padding:10px;border-radius:10px">‚úÖ Qualidade certificada</div>
          <div style="background:var(--glass);padding:10px;border-radius:10px">üí∏ Melhor custo-benef√≠cio</div>
        </div>
        <div style="margin-top:18px;display:flex;gap:10px;align-items:center">
          <strong style="font-size:13px;color:var(--muted)">Simulador r√°pido:</strong>
          <input id="sim-kwh" type="number" placeholder="kWh/m√™s" style="width:120px;padding:8px;border-radius:8px;border:1px solid #e6e7ee">
          <input id="sim-price" type="number" placeholder="R$/kWh (ex:0.80)" style="width:120px;padding:8px;border-radius:8px;border:1px solid #e6e7ee">
          <button class="btn" id="sim-btn">Calcular</button>
          <div id="sim-result" style="margin-left:8px;color:var(--primary);font-weight:700"></div>
        </div>
      </div>
      <aside class="hero-card" style="background:linear-gradient(180deg,#fff,#faf8ff);text-align:center;">
        <img src="https://placehold.co/1100x600/2C1A47/FFF?text=Energia+Solar+em+Amargosa" alt="Pain√©is solares" style="width:100%;height:220px;object-fit:cover;border-radius:10px;margin-bottom:12px">
        <h3 style="margin:8px 0">Por que escolher a Amarsolar?</h3>
        <p style="color:var(--muted);font-size:14px">Atendimento local, equipe t√©cnica qualificada e solu√ß√µes customizadas para reduzir sua conta de energia.</p>
      </aside>
    </section>
    <section id="educacao" style="margin-top:32px">
      <h2>Entenda a energia solar</h2>
      <p style="color:var(--muted)">Respostas claras para as principais d√∫vidas sobre energia solar, regulamenta√ß√£o e funcionamento.</p>
      <div class="grid" id="edu-grid">
        <div class="card" data-topic="o-que-e" onclick="openTopic('o-que-e')">
          <h4>O que √© energia solar?</h4>
          <p>Vis√£o geral sobre gera√ß√£o fotovoltaica e seus benef√≠cios.</p>
        </div>
        <div class="card" onclick="openTopic('como-funciona')">
          <h4>Como funciona a instala√ß√£o?</h4>
          <p>Processo de avalia√ß√£o, projeto, instala√ß√£o e comissionamento.</p>
        </div>
        <div class="card" onclick="openTopic('economia')">
          <h4>Economia na conta de luz</h4>
          <p>Estimativas de redu√ß√£o e retorno sobre investimento (ROI).</p>
        </div>
        <div class="card" onclick="openTopic('aneel')">
          <h4>Regulamenta√ß√µes (ANEEL)</h4>
          <p>Informa√ß√µes essenciais sobre normas e conex√£o √† rede.</p>
        </div>
        <div class="card" onclick="openTopic('taxacao')">
          <h4>Taxa√ß√£o</h4>
          <p>Como impostos e tarifas podem impactar o projeto.</p>
        </div>
        <div class="card" onclick="openTopic('falta-luz')">
          <h4>Falta de luz</h4>
          <p>O que acontece quando falta energia na rede e solu√ß√µes com baterias.</p>
        </div>
      </div>
      <div id="topic-modal" class="modal-backdrop">
        <div class="modal-content">
          <button class="close-modal">‚úï</button>
          <div id="topic-content"></div>
        </div>
      </div>
    </section>
    <section id="sobre" style="margin-top:32px">
      <h2>Sobre a Amarsolar</h2>
      <div class="about">
        <div>
          <p>"A Amarsolar nasceu com o prop√≥sito de transformar a forma como as pessoas consomem energia, oferecendo solu√ß√µes sustent√°veis e acess√≠veis de energia solar. Fundada em Amargosa, nossa empresa tem ra√≠zes fortes na regi√£o e um compromisso com o desenvolvimento local, buscando sempre a inova√ß√£o e a excel√™ncia. O projeto surgiu da vis√£o de tornar a energia solar mais acess√≠vel e eficiente, aproveitando a abund√¢ncia de sol que temos em nossa regi√£o. Acreditamos que a energia solar √© o futuro, n√£o s√≥ para reduzir custos, mas tamb√©m para preservar o meio ambiente, e foi com essa convic√ß√£o que come√ßamos a atender clientes que, assim como n√≥s, desejam um mundo mais sustent√°vel."</p>
          <div style="margin-top:12px" class="values">
            <div class="value"><strong>Miss√£o:</strong> Tornar a energia solar acess√≠vel e eficiente, promovendo desenvolvimento local e sustentabilidade.</div>
            <div class="value"><strong>Vis√£o:</strong> Ser refer√™ncia regional em solu√ß√µes solares, impulsionando a transi√ß√£o energ√©tica no interior do pa√≠s.</div>
            <div class="value"><strong>Valores:</strong> Integridade, inova√ß√£o, compromisso com o cliente e responsabilidade ambiental.</div>
          </div>
        </div>
        <aside>
          <div style="background:var(--card);padding:14px;border-radius:12px;box-shadow:0 8px 26px rgba(44,26,71,0.04)">
            <h4>Contato r√°pido</h4>
            <p style="color:var(--muted);font-size:14px">Telefone: (75) 99984-2449<br>Email: contato@amarsolar.com.br</p>
            <div style="margin-top:12px"><a id="quick-wa" class="btn btn-primary" href="#">Solicitar or√ßamento</a></div>
          </div>
        </aside>
      </div>
    </section>
    <section id="portfolio" style="margin-top:32px">
      <h2>Portf√≥lio</h2>
      <p style="color:var(--muted)">Projetos realizados pela Amarsolar. Clique para ampliar e ver detalhes.</p>
      <div class="gallery">
        <img src="https://placehold.co/400x300/10B981/FFF?text=Projeto+Residencial" alt="Projeto Residencial em Amargosa" onclick="openPortfolio({src:'https://placehold.co/400x300/10B981/FFF?text=Projeto+Residencial', title:'Projeto Residencial', desc:'Instala√ß√£o de 15 pain√©is de 450W em telhado de cer√¢mica, resultando em 95% de redu√ß√£o na conta de energia para uma fam√≠lia de 4 pessoas.'})">
        <img src="https://placehold.co/400x300/FACC15/FFF?text=Projeto+Comercial" alt="Projeto Comercial - Loja de Roupas" onclick="openPortfolio({src:'https://placehold.co/400x300/FACC15/FFF?text=Projeto+Comercial', title:'Projeto Comercial', desc:'Sistema de 50 pain√©is para uma loja de varejo, cobrindo todo o consumo e eliminando os custos de eletricidade. O projeto incluiu sistemas de monitoramento em tempo real.'})">
        <img src="https://placehold.co/400x300/3B82F6/FFF?text=Projeto+Industrial" alt="Projeto Industrial - F√°brica" onclick="openPortfolio({src:'https://placehold.co/400x300/3B82F6/FFF?text=Projeto+Industrial', title:'Projeto Industrial', desc:'Desenvolvimento de uma usina solar de grande escala para uma f√°brica local, gerando cr√©ditos de energia para a matriz e reduzindo drasticamente os custos operacionais.'})">
      </div>
      <div style="margin-top:18px">
        <h4>Parcerias</h4>
        <p style="color:var(--muted)">Exibimos abaixo os logos das empresas parceiras.</p>
        <div style="display:flex;gap:12px;margin-top:8px;align-items:center">
          <img src="https://placehold.co/150x80/E2E8F0/64748B?text=Parceiro+1" alt="Parceiro 1" style="height:44px;object-fit:contain">
          <img src="https://placehold.co/150x80/E2E8F0/64748B?text=Parceiro+2" alt="Parceiro 2" style="height:44px;object-fit:contain">
          <img src="https://placehold.co/150x80/E2E8F0/64748B?text=Parceiro+3" alt="Parceiro 3" style="height:44px;object-fit:contain">
        </div>
      </div>
    </section>
    <section id="orcamento" style="margin-top:32px">
      <h2>Contato & Or√ßamento</h2>
      <p style="color:var(--muted)">Preencha o formul√°rio e nossa equipe entrar√° em contato.</p>
      <form id="contact-form" action="" onsubmit="handleForm(event)">
        <input type="text" id="name" name="name" placeholder="Nome *" required>
        <input type="tel" id="phone" name="phone" placeholder="Telefone *" required>
        <select id="projectType" name="projectType" required>
          <option value="">Tipo de projeto*</option>
          <option>Residencial</option>
          <option>Comercial</option>
          <option>Industrial</option>
          <option>Outro</option>
        </select>
        <input type="number" id="consumption" name="consumption" placeholder="Consumo (kWh/m√™s) *" required>
        <textarea id="message" name="message" placeholder="Mensagem"></textarea>
        <div style="display:flex;gap:10px;align-items:center">
          <button class="btn btn-primary" type="submit">Enviar</button>
          <div id="form-status" style="color:var(--muted)"></div>
        </div>
      </form>
    </section>
    <section style="margin-top:32px">
      <h2>O que nossos clientes dizem</h2>
      <div class="testimonials" id="testimonials">
        <div class="testimonial">"Excelente servi√ßo e redu√ß√£o real na conta de energia." ‚Äî Maria, Amargosa</div>
        <div class="testimonial">"Equipe r√°pida e atenciosa. Recomendo." ‚Äî Jo√£o, Regional</div>
        <div class="testimonial">"Projeto comercial que otimizou nossos custos." ‚Äî Empresa X</div>
        <div class="testimonial">"Um investimento que valeu a pena em todos os sentidos." ‚Äî Carlos, Amargosa</div>
        <div class="testimonial">"Atendimento impec√°vel e solu√ß√£o que superou as expectativas." ‚Äî Ana, Amargosa</div>
      </div>
    </section>
  </main>
  <footer>
    <div class="container" style="display:flex;justify-content:space-between;align-items:center;gap:12px">
      <div>
        <strong>Amarsolar</strong><br>
        <small style="color:var(--muted)">Energia solar em Amargosa ‚Äî compromisso com o futuro.</small>
      </div>
      <div style="display:flex;gap:12px;align-items:center">
        <a href="#">Instagram</a>
        <a href="#">Facebook</a>
        <a href="#">LinkedIn</a>
      </div>
    </div>
  </footer>
  <div id="lightbox" class="modal-backdrop">
    <div class="modal-content" style="max-width:900px">
      <button class="close-modal">‚úï</button>
      <img id="lightbox-img" src="" alt="Amplia√ß√£o" style="max-width:100%;max-height:60vh;border-radius:10px;object-fit:contain">
      <div id="lightbox-details" style="margin-top:12px">
        <h4 id="lightbox-title" style="margin:0"></h4>
        <p id="lightbox-desc" style="color:var(--muted);font-size:14px;margin:5px 0 0"></p>
      </div>
    </div>
  </div>
  <a id="whatsapp-btn" class="whatsapp" href="#" target="_blank" aria-label="WhatsApp">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512" fill="white"><path d="M380.9 97.1C339.4 55.4 283.6 32 223.9 32c-122.4 0-222 99.6-222 222 0 39.1 10.2 77.3 29.6 111L1 448l107.9-30.5c34.7 19.3 74.3 29.5 114.7 29.5 122.4 0 222-99.6 222-222 0-38.3-10.9-70.3-30.8-101.4zM223.9 417.8c-26.6 0-53.1-9.9-75.6-29.8 0 0-1.2-1-1.2-1.2l-32.8-9.1-33.5 98.2 99.4-31.5c21.8 11.6 46.1 17.7 70.8 17.7 93.9 0 170.8-76.1 170.8-170.1 0-82-62.8-150.3-144-162.5zm-55-121.7l-4.4-2.5c-3.7-2.1-7.8-3.2-11.9-3.2s-8.1 1.1-11.8 3.2c-3.7 2.1-7.1 5.3-10.2 9.4-3.1 4.1-5.6 9-7.5 14.8-1.8 5.8-2.6 12.1-2.6 18.2s.8 12.4 2.6 18.2c1.9 5.8 4.4 10.7 7.5 14.8 3.1 4.1 6.5 7.3 10.2 9.4s7.8 3.2 11.8 3.2c4.1 0 8.2-1.1 11.9-3.2l4.4-2.5c3.7-2.1 7.1-5.3 10.2-9.4 3.1-4.1 5.6-9 7.5-14.8 1.8-5.8 2.6-12.1 2.6-18.2s-.8-12.4-2.6-18.2c-1.9-5.8-4.4-10.7-7.5-14.8-3.1-4.1-6.5-7.3-10.2-9.4z"/></svg>
    <span>Fale conosco</span>
  </a>
  <div class="chatbot-btn" id="chatbot-btn">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512" fill="white"><path d="M495.6 20.2c-15.6-20.9-40.4-31.3-66.8-29.4-44.1 3.2-87.1 27.6-116.1 62.4-28.7 34.4-44.5 76.5-44.5 119.5s15.8 85.1 44.5 119.5c29 34.8 72 59.2 116.1 62.4 26.4 1.9 51.2-8.5 66.8-29.4 20.3-27.4 31.9-61.9 31.9-98.1s-11.6-70.7-31.9-98.1zM116.4 492.3c-15.6 20.9-40.4 31.3-66.8 29.4-44.1-3.2-87.1-27.6-116.1-62.4-28.7-34.4-44.5-76.5-44.5-119.5s15.8-85.1 44.5-119.5c29-34.8 72-59.2 116.1-62.4 26.4-1.9 51.2 8.5 66.8 29.4 20.3 27.4 31.9 61.9 31.9 98.1s-11.6 70.7-31.9 98.1z"/></svg>
  </div>
  <div class="chatbot-modal" id="chatbot-modal">
    <div class="chatbot-header">
      <span>Chatbot Amarsolar</span>
      <button class="close-modal">‚úï</button>
    </div>
    <div class="chatbot-body" id="chat-body"></div>
    <div class="chatbot-input-container">
      <input type="text" class="chatbot-input" id="chat-input" placeholder="Digite sua mensagem...">
      <button class="chatbot-send" id="chat-send">‚ñ∂</button>
    </div>
  </div>
  <script>
    const WHATSAPP_NUMBER = '5575999842449';
    const EMAIL_RECEIVER = 'mauriciosantana408@gmail.com';
    const GOOGLE_FORM_ACTION = ''; // COLOQUE A URL AQUI!
    const GOOGLE_FORM_FIELD_MAPPING = {
      'name': 'entry.123456789',
      'phone': 'entry.987654321',
      'projectType': 'entry.1122334455',
      'consumption': 'entry.5544332211',
      'message': 'entry.9988776655'
    };
    function on(el, evt, handler){if(!el)return;if(typeof el.addEventListener==='function')return el.addEventListener(evt,handler);if(typeof el.attachEvent==='function')return el.attachEvent('on'+evt,handler);el['on'+evt]=handler;}
    document.addEventListener('DOMContentLoaded',function(){
      const waBtn=document.getElementById('whatsapp-btn'),quickWa=document.getElementById('quick-wa'),DEFAULT_WA_MESSAGE='Ol√°! Gostaria de um or√ßamento de energia solar para minha resid√™ncia.';if(WHATSAPP_NUMBER&&WHATSAPP_NUMBER.trim()!==''){const waBase=`https://wa.me/${WHATSAPP_NUMBER}`;const waUrl=`${waBase}?text=${encodeURIComponent(DEFAULT_WA_MESSAGE)}`;if(waBtn)waBtn.href=waUrl;if(quickWa)quickWa.href=waUrl;}else{if(waBtn)waBtn.style.display='none';if(quickWa)quickWa.style.display='none';}
      const simBtn=document.getElementById('sim-btn');function calcSimInternal(){const kwh=Number(document.getElementById('sim-kwh').value)||0;const price=Number(document.getElementById('sim-price').value)||0.8;const out=document.getElementById('sim-result');if(kwh<=0){if(out)out.textContent='Informe kWh/m√™s';return}
      const monthlyCost=kwh*price;const estimatedReduction=monthlyCost*0.8;const monthlySaving=estimatedReduction;const yearlySaving=monthlySaving*12;if(out)out.textContent=`Economia aprox.: R$ ${monthlySaving.toFixed(2)}/m√™s ‚Äî R$ ${yearlySaving.toFixed(2)}/ano`;}
      if(simBtn)on(simBtn,'click',calcSimInternal);window.calcSim=calcSimInternal;
      const topicModal=document.getElementById('topic-modal'),topicContent=document.getElementById('topic-content'),closeBtns=document.querySelectorAll('.close-modal');const topics={'o-que-e':'<h3>O que √© energia solar?</h3><p>A energia solar fotovoltaica converte luz do sol em eletricidade atrav√©s de pain√©is solares. √â limpa, renov√°vel e reduz a depend√™ncia de combust√≠veis f√≥sseis.</p>','como-funciona':'<h3>Como funciona a instala√ß√£o?</h3><p>Primeiro fazemos um estudo de viabilidade, depois projetamos o sistema, instalamos os pain√©is e o inversor, e comissionamos para conectar √† rede el√©trica.</p>','economia':'<h3>Economia na conta de luz</h3><p>Sistemas bem projetados podem reduzir significativamente a conta. O ROI depende do consumo, tarifa e do investimento inicial.</p>','aneel':'<h3>Regulamenta√ß√µes (ANEEL)</h3><p>A ANEEL regulamenta o sistema de compensa√ß√£o de energia (net metering). √â importante seguir normas para conex√£o √† rede.</p>','taxacao':'<h3>Taxa√ß√£o</h3><p>Tributos e tarifas variam; consideramos impostos locais e custos de instala√ß√£o no or√ßamento.</p>','falta-luz':'<h3>Falta de luz</h3><p>Sem baterias, sistemas conectados √† rede n√£o funcionam em queda da rede por seguran√ßa. Oferecemos solu√ß√µes com armazenamento para continuidade.</p>'};
      function openTopicInternal(key){if(topicContent)topicContent.innerHTML=topics[key]||'<p>Conte√∫do em desenvolvimento.</p>';if(topicModal)topicModal.classList.add('active');}
      function closeModals(){const modals=document.querySelectorAll('.modal-backdrop.active');modals.forEach(m=>m.classList.remove('active'));}
      if(closeBtns)closeBtns.forEach(btn=>on(btn,'click',closeModals));window.openTopic=openTopicInternal;window.closeModals=closeModals;
      const portfolioModal=document.getElementById('lightbox'),portfolioImg=document.getElementById('lightbox-img'),portfolioTitle=document.getElementById('lightbox-title'),portfolioDesc=document.getElementById('lightbox-desc');function openPortfolio(data){if(portfolioImg)portfolioImg.src=data.src;if(portfolioTitle)portfolioTitle.textContent=data.title;if(portfolioDesc)portfolioDesc.textContent=data.desc;if(portfolioModal)portfolioModal.classList.add('active');}
      window.openPortfolio=openPortfolio;
      const cont=document.getElementById('testimonials');if(cont){setInterval(()=>{const maxScroll=cont.scrollWidth-cont.clientWidth;if(maxScroll<=0)return;if(cont.scrollLeft+cont.clientWidth>=cont.scrollWidth)cont.scrollLeft=0;else{try{cont.scrollBy({left:310,behavior:'smooth'});}catch(e){cont.scrollLeft+=310;}}},3500);}
      const form=document.getElementById('contact-form'),statusDiv=document.getElementById('form-status');function isValidPhone(p){const regex=/^\(?[1-9]{2}\)?\s?9?\d{4}-?\d{4}$/;return regex.test(p);}
      function handleFormInternal(e){e&&e.preventDefault();const name=document.getElementById('name').value;const phone=document.getElementById('phone').value;const type=document.getElementById('projectType').value;const consumption=document.getElementById('consumption').value;if(!name||!phone||!type||!consumption){statusDiv.textContent='Por favor, preencha todos os campos obrigat√≥rios.';statusDiv.style.color='red';return;}
      if(!isValidPhone(phone)){statusDiv.textContent='Telefone inv√°lido.';statusDiv.style.color='red';return;}
      statusDiv.textContent='Enviando...';statusDiv.style.color='#6b6f76';
      const formData=new FormData();formData.append(GOOGLE_FORM_FIELD_MAPPING.name,name);formData.append(GOOGLE_FORM_FIELD_MAPPING.phone,phone);formData.append(GOOGLE_FORM_FIELD_MAPPING.projectType,type);formData.append(GOOGLE_FORM_FIELD_MAPPING.consumption,consumption);if(GOOGLE_FORM_ACTION&&GOOGLE_FORM_ACTION.trim()!==''){fetch(GOOGLE_FORM_ACTION,{method:'POST',mode:'no-cors',body:formData}).then(()=>{statusDiv.textContent='Enviado! Entraremos em contato em breve.';statusDiv.style.color='#6b6f76';
 form.reset();}).catch(err=>{statusDiv.textContent='Erro ao enviar. Tente novamente ou use o WhatsApp.';statusDiv.style.color='red';});}
      else{const waMessage=`Ol√°! Gostaria de um or√ßamento de energia solar.\nNome: ${name}\nTelefone: ${phone}\nTipo: ${type}\nConsumo(kWh/m√™s): ${consumption}`;const waUrl=`https://wa.me/${WHATSAPP_NUMBER}?text=${encodeURIComponent(waMessage)}`;window.open(waUrl,'_blank');statusDiv.textContent='Redirecionando para o WhatsApp...';}}
      window.handleForm=handleFormInternal;
      const anchors=document.querySelectorAll('a[href^="#"]');if(anchors&&anchors.length){Array.prototype.forEach.call(anchors,function(a){on(a,'click',function(e){if(a.getAttribute('href')==='#')return;e&&e.preventDefault();const id=a.getAttribute('href').slice(1);const el=document.getElementById(id);if(el)try{el.scrollIntoView({behavior:'smooth'});}catch(err){el.scrollIntoView();}});});}
      const chatbotBtn=document.getElementById('chatbot-btn'),chatbotModal=document.getElementById('chatbot-modal'),chatBody=document.getElementById('chat-body'),chatInput=document.getElementById('chat-input'),chatSend=document.getElementById('chat-send');let chatState='initial';function addMessage(text,sender){const msg=document.createElement('div');msg.classList.add('chat-message',`chat-${sender}`);msg.textContent=text;chatBody.appendChild(msg);chatBody.scrollTop=chatBody.scrollHeight;}
      function processChat(message){switch(chatState){case'initial':addMessage('Ol√°! Sou o assistente virtual da Amarsolar. Qual o seu nome?','bot');chatState='askName';break;case'askName':addMessage('Ol√°, '+message+'. Prazer! Qual √© o seu consumo m√©dio mensal de energia (em kWh)?','bot');chatState='askConsumption';break;case'askConsumption':addMessage('Perfeito! Para finalizarmos, digite seu telefone para contato.','bot');chatState='askPhone';break;case'askPhone':addMessage('Obrigado! Entraremos em contato em breve. Voc√™ pode agora preencher o formul√°rio completo.','bot');chatState='final';break;default:addMessage('Desculpe, n√£o entendi.','bot');break;}}
      on(chatbotBtn,'click',()=>chatbotModal.classList.toggle('active'));on(chatSend,'click',()=>handleChatInput());on(chatInput,'keydown',e=>{if(e.key==='Enter')handleChatInput();});function handleChatInput(){const input=chatInput.value.trim();if(input==='')return;addMessage(input,'user');chatInput.value='';processChat(input);}
      processChat('');
    });
  </script>
</body>
</html>
